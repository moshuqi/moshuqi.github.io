---
layout: post
title:  搬瓦工+shadowsocks：搭建自己的VPN服务器
category: "其它"
---

待续：）

### 购买服务器

服务器用的是[搬瓦工](https://bandwagonhost.com)，貌似需要翻墙才能访问。

个人用选个最便宜的每月2.99$，看配置应该是够用了的。

![image1](/images/posts/vpn/1.jpeg)

选择KVM， 为嘛选这个，因为据说KVM是完全虚拟的，可以说是最真实的虚拟机，内存不共享，并且可以做很多事情，比如装docker。

![image1](/images/posts/vpn/2.jpeg)

有按月按季度按年的，先选个按月的，第一次用也不知道稳不稳定。Location是服务器的地址，到时候打开谷歌首页显示的国家会和这个相关。

![image1](/images/posts/vpn/3.jpeg)

确认之后点击点击 **Checkout**

![image1](/images/posts/vpn/4.jpeg)

填写完相关的资料后付款，这里可以选择支付宝，方便没信用卡的同学购买：）

![image1](/images/posts/vpn/5.jpeg)

### 安装Shadowsocks

购买成功后回到首页，先选择右上角的 **Client Area**，然后选择 **My Services**

![image1](/images/posts/vpn/6.jpeg)

点击 **KiwiVM Control Panel** 进入服务器的控制面板

![image1](/images/posts/vpn/7.jpeg)

侧边栏选择 **Main controls**，可以看到当前服务器的信息，**IP**地址后续需要提供给客户端。操作系统默认安装了 **Centos**，你可以在左边的 **Install new OS** 中选择其他的系统，有**Ubuntu**和**Debian**，只需几分钟便可重装完毕。

不过最好还是使用 **Centos**，因为系统提供一键安装Shadowsocks的脚本只支持 **Centos**，换了其他系统的话会安装失败，除非你自己手动安装。

![image1](/images/posts/vpn/8.jpeg)

点击侧边栏最下方的 **Shadowsocks Server** 选项，进入之后直接点击 **Install Shadowsocks Server** 按钮，运行脚本在服务器上安装Shadowsocks，稍等片刻安装完毕。

![image1](/images/posts/vpn/19.png)

安装完成后重新点击 **Shadowsocks Server** 选项，进入界面后便可看到 **Shadowsocks server** 的相关信息，主要有**加密方式**，**端口号**，**服务器密码**，后续客户端连接服务器需要用到这些信息。

![image1](/images/posts/vpn/9.jpeg)

### 安装Shadowsocks客户端

**Shadowsocks**客户端的[下载地址](https://shadowsocks.org/en/download/clients.html)，可以看到有各种客户端的下载。

![image1](/images/posts/vpn/10.jpeg)

#### Mac上配置

用的是Mac电脑，所以点击相关链接。东西都挂在github上，下载对应的zip文件，下载完成后安装并运行起来。

![image1](/images/posts/vpn/11.jpeg)

点击图标，进入 **服务器设置**

![image1](/images/posts/vpn/12.jpeg)

主要有四个地方要填，**服务器的地址**，**端口号**，**加密方法**，**密码**。服务器地址即为之前 **Main controls** 选项中的IP地址。端口号、加密方法、密码必须与之前 **Shadowsocks Server** 中的信息一一匹配，否则会连接失败。

![image1](/images/posts/vpn/13.jpeg)

设置完成后点击确定，然后服务器选择这个配置，默认选中PAC自动模式，确保Shadowsocks状态为**On**，这是后打开谷歌试试~

![image1](/images/posts/vpn/18.jpeg)

Google图标右下角显示的是Canada，因为之前服务器的地址选的是加拿大：）

#### iOS上配置

iOS上用的VPN App 是**Wingy**，可以App Store上直接搜。官方的**Wingy**下载是免费的，注意分辨有些图标相似的App。

下载完成后运行，点击 **选择线路**

![image1](/images/posts/vpn/14.jpeg)

选择 **新增线路**

![image1](/images/posts/vpn/15.jpeg)

选择 **Shadowsocks(R)**

![image1](/images/posts/vpn/16.jpeg)

在配置界面填写服务器相关的信息，和Mac上的一样，填写完成后保存，然后在首页进行连接。

![image1](/images/posts/vpn/17.jpeg)















